!function(){var a=function(){var a="ontouchstart"in window,b=/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":/trident/i.test(navigator.userAgent)?"ms":"opera"in window?"O":"";return{isTouch:a,start:a?"touchstart":"mousedown",move:a?"touchmove":"mousemove",end:a?"touchend":"mouseup",vendor:b,get:function(a){return document.querySelector(a)},getAll:function(a){return document.querySelectorAll(a)},removeEvent:function(a,b,c){a&&a.removeEventListener(b,c,!1)},addEvent:function(a,b,c){a&&a.addEventListener(b,c,!1)},forEach:function(a,b){if(a.length&&"function"==typeof b)for(var c=0;c<a.length;c++)b(a[c],c)},closest:function(a,b){for(;a&&!a.classList.contains(b);)a=a.parentElement,a===document.body&&(a=void 0);return a}}}(),b={},c=a.get("#wrap")||document.body;b.popup=function(){function b(b,e,f){var g={title:f.title,isCenterBox:f.isCenterBox||!1,className:f.className||"",end:"无作用"},h=document.createElement("div"),i=g.title?'<div class="pop-topbar"><div class="btn-pop-closer"></div><div class="pop-title">'+g.title+"</div></div>":"";return g.isCenterBox&&(e='<div class="innerbox">'+e+"</div>"),h.id=b,h.className="popbox "+g.className,h.style.display="none",h.innerHTML=i+(e||""),c.appendChild(h),d[b]=h,i?a.addEvent(h.querySelector(".btn-pop-closer"),"click",function(){h.style.display="none"}):a.addEvent(h,"click",function(a){a.target===this&&(this.style.display="none")}),h}var d={};return{hide:function(b){return b&&d[b]?d[b].style.display="none":a.forEach(d,function(a){a.style.display="none"}),this},show:function(a){return a&&d[a]&&(d[a].style.display="block"),this},add:function(a,c,e){if(!a||!c)return this;if(d[a])return console.log("Box of "+a+" is existed!"),this;var f=b(a,c,e);return f},bind:function(c,d,e){if(!c||!d)return this;{var f=this,g="r_"+Math.random()*Math.random();b(g,d,e)}a.addEvent(a.get(c),"click",function(){f.show(g)})}}}(),b.ggk=function(){function a(){var a="ontouchstart"in window,b=a?"touchstart":"mousedown",c=a?"touchmove":"mousemove",d=a?"touchend":"mouseup";h.addEventListener(b,function(b){b.preventDefault(),a&&(b=b.touches[0]),n.drawing=!0;var c=h.getBoundingClientRect();n.lastPoint={x:2*b.pageX-c.left,y:2*b.pageY-c.top},n.curPoint=n.lastPoint,k||(k=!0)}),h.addEventListener(c,function(b){b.preventDefault(),a&&(b=b.touches[0]);var c=h.getBoundingClientRect(),d=2*b.pageX-c.left,e=2*b.pageY-c.top;n.curPoint={x:d,y:e}}),h.addEventListener(d,function(a){a.preventDefault(),n.drawing=!1,n.lastPoint={x:0,y:0};for(var b=i.getImageData(0,0,n.w,n.h).data,c=0,d=0;c<b.length;c+=4)b[c+3]&&d++;d<=n.w*n.h*.75&&0==l&&(l=!0,m(h,i))}),h.addEventListener("touchcancel",function(a){a.preventDefault(),n.drawing=!1,n.lastPoint={x:0,y:0}})}function b(){if(n.drawing){var a=n.lastPoint,b=n.curPoint;i.save(),i.lineWidth=70,i.fillStyle=i.strokeStyle="#000",i.lineCap="round",i.beginPath(),a.x&&a.x==b.x&&a.y==b.y?(i.arc(b.x,b.y,i.lineWidth/2,0,2*Math.PI,!0),i.fill()):(i.moveTo(a.x||b.x,a.y||b.y),i.lineTo(b.x,b.y),i.stroke()),i.restore(),n.lastPoint={x:b.x,y:b.y}}}function d(){h=document.createElement("canvas"),h.id="global-canvas",h.className="global-canvas",h.width=n.w=2*window.innerWidth,h.height=n.h=2*window.innerHeight,c.appendChild(h),i=h.getContext("2d")}function e(a){var b="请用手指擦一擦",c="destination-out";"string"==typeof a&&(i.fillStyle=a,c="source-over"),i.font="bolder 50px Arial",i.globalCompositeOperation=c,i.fillText(b,window.innerWidth-i.measureText(b).width/2,100),i.globalCompositeOperation="destination-out"}var f,g,h=void 0,i=void 0,j=new Image,k=!1,l=!1,m=function(){},n={w:260,h:150,drawing:!1,curPoint:{x:0,y:0},lastPoint:{x:0,y:0}};return j.addEventListener("load",function(){var a=2*window.innerWidth,b=a/j.width*j.height;i.drawImage(j,0,0,a,b),e(g)}),{init:function(c,e,h){!this.inited&&c&&(this.inited=!0,g=h,d(),j.src=c,f=setInterval(b,0),a(),m=function(a,b){a.classList.add("hide"),setTimeout(function(){clearInterval(f),a.style.display="none"},400),"function"==typeof e&&e(a,b)})}}}(),b.map=function(){function b(){f=document.createElement("div"),f.id="global-map",f.className="global-block global-map",f.innerHTML='<div id="allmap" class="allmap"></div>				<div class="map-topbar"><div class="btn-map-closer"></div><div id="map-title" class="map-title"></div></div>				',c.appendChild(f),g=a.get("#map-title"),g.setTitle=function(a){this.innerHTML=a}}function d(a,b){var c=a.point;e.centerAndZoom(c,14);var d=new BMap.Marker(c);e.addOverlay(d),b(a,d)}var e,f,g,h,i={};return{doFn:function(a){return"function"==typeof i[a]&&i[a](e),this},addFn:function(a,b){return i[a]=b,this},setTitle:function(a){return g&&(g.innerHTML=a),this},searchInBounds:function(a,b){b="function"==typeof b?b:function(){};var c=new BMap.LocalSearch(e,{onSearchComplete:function(a){c.getStatus()==BMAP_STATUS_SUCCESS&&b(a)}});c.searchInBounds(a,e.getBounds())},getGeo:function(a){a||(a={}),a.success="function"==typeof a.success?a.success:function(){},a.error="function"==typeof a.error?a.error:function(){};var b=new BMap.Geolocation;b.getCurrentPosition(function(b){this.getStatus()==BMAP_STATUS_SUCCESS?d(b,a.success):a.error()},{enableHighAccuracy:!0})},setGeo:function(a,b,c){if("string"==typeof a&&this.inited){b=b||a,c=c||h;var d=new BMap.Geocoder;d.getPoint(a,function(a){if(a){e.clearOverlays();var c=new BMap.Marker(a);e.centerAndZoom(a,14),e.addOverlay(c);var d=new BMap.InfoWindow(b,{enableMessage:!1});e.openInfoWindow(d,a),c.addEventListener("click",function(){e.openInfoWindow(d,a)})}},c)}},hide:function(){return f.classList.remove("show"),this},show:function(){return f.classList.add("show"),this},init:function(c){var d=this;d.inited||(d.inited=!0,h=c||"广州市",b(),e=new BMap.Map("allmap"),e.centerAndZoom(h,14),e.addControl(new BMap.NavigationControl({anchor:BMAP_ANCHOR_BOTTOM_RIGHT,type:BMAP_NAVIGATION_CONTROL_ZOOM})),a.forEach(a.getAll(".btn-map"),function(b){a.addEvent(b,"click",function(){d.show();var a=b.getAttribute("source");a&&d.doFn(a)})}),a.addEvent(a.get("#global-map .btn-map-closer"),"click",function(){d.hide(),g.innerHTML=""}))}}}(),b.video=function(){function c(a,b,c){var d=window.innerWidth,e=parseInt(d*c/b);a.width=d,a.height=e,a.style.margin="-"+parseInt(e/2)+"px 0 0 -"+d/2+"px",a.style.opacity=1}function d(){b.popup.show("global-video");var a=this.getAttribute("source").split("|");a[1]&&a[2]||(a[1]=320,a[2]=180),f._src!=a[0]&&(f.style.opacity=0,f.src=f._src=a[0],c(f,a[1],a[2]))}var e,f;return{pause:function(){f.pause()},reset:function(){a.forEach(a.getAll(".btn-video"),function(b){a.removeEvent(b,"click",d),a.addEvent(b,"click",d)})},init:function(){this.inited||(this.inited=!0,e=b.popup.add("global-video","<video controls></video>",{className:"global-video",title:"视频播放"}),f=a.get("#global-video video"),a.addEvent(f,"play",function(){b.audio.inited&&b.audio.isPlaying()&&b.audio.pause()}),this.reset(),a.addEvent(a.get("#global-video .btn-pop-closer"),"click",function(){f.pause()}))}}}(),b.audio=function(){function b(b){d=document.createElement("div"),d.className="global-audio-box pause",d.id="global-audio-box",d.innerHTML='<div class="global-audio-box-inner"><div></div></div>',e=document.createElement("audio"),e.id="global-audio",e.style.display="none",e.src=b,e.loop="loop",e.preload="auto",d.appendChild(e),c.appendChild(d),e=a.get("#global-audio")}var d,e;return{isPlaying:function(){return!e.paused},pause:function(){this.isInited&&(e.pause(),d.classList.add("pause"))},play:function(){this.isInited&&e.play()},changeSrc:function(a){a&&this.isInited&&(e.src=a)},init:function(c){var f=this;c&&!f.isInited&&(f.isInited=!0,b(c),a.addEvent(d,"click",function(){f.isPlaying()?f.pause():f.play()}),a.addEvent(e,"play",function(){d.classList.remove("pause")}))}}}(),b.view360=function(){function c(){var c='<div class="view360-wrap" id="view360-list">				</div>';g=b.popup.add("view360-box",c,{title:"360°展示",className:"view360-box"}),h=a.get("#view360-list")}function d(b){for(var c=0;b>c;c++)l[c]=document.createElement("img"),l[c].src=e(i,c+1),a.addEvent(l[c],"load",mymodule.view360.loaded);h.appendChild(l[0]),n.setCur(1),m=0}function e(a,b){return b=b.toString(),b.length<2&&(b="0"+b),a.replace(/%%/,b)}function f(){a.addEvent(h,a.start,function(b){var c=a.isTouch?b.touches[0]:b;clearTimeout(k),n.isStart=!0,n.px_start=c.pageX,b.preventDefault()}),a.addEvent(document,a.move,function(b){if(n.isStart){var c=a.isTouch?b.touches[0]:b,d=n.px_start,e=c.pageX,f=-Math.floor((e-d)/(window.innerWidth/j));if(0!=f){var g=n.curIndex+f;g>=j?g-=j:0>g&&(g=j+g),n.setCur(g)}b.preventDefault()}}),a.addEvent(document,a.end,function(b){if(n.isStart){{a.isTouch?b.touches[0]:b}n.curIndex=n.curI,b.preventDefault()}n.isStart=!1})}var g,h,i,j,k,l=[],m=0,n={isStart:!1,curI:0,curIndex:0,px_start:0,setCur:function(a){0>a||a>=j||(n.curI=a,h.innerHTML="",h.appendChild(l[a]))}};return{loaded:function(){function a(){return 0==b?void clearTimeout(k):(n.setCur(b-1),b--,void(k=setTimeout(a,20)))}if(m++,m==j){var b=j;a()}},init:function(){var e=this;e.inited||(e.inited=!0,c(),f(),a.forEach(a.getAll(".btn-view360"),function(c){a.addEvent(c,"click",function(){var a=this.getAttribute("sources").split("|");i!=a[0]&&(i=a[0],j=parseInt(a[1]),d(j)),b.popup.show("view360-box")})}))}}}(),b.loading=function(){function a(){b=document.createElement("div"),b.id="loadingbox",b.className="loadingbox",c.appendChild(b)}var b;return{hide:function(){this.inited&&(b.style.display="none")},show:function(){var a=this;return a.inited?void(b.style.display="block"):void a.init()},init:function(){var b=this;b.inited||(b.inited=!0,a(),b.show())}}}(),b.menu=function(){function b(){j=a.getAll(".section"),k=j.length;var b=[];a.forEach(j,function(a){var c=a.getAttribute("source"),d=a.getAttribute("title")||"";b.push('<li><img src="'+c+'" alt=""><p>'+decodeURIComponent(d)+"</p></li>")}),g=document.createElement("div"),g.id="menu-wrap",g.className="menu-wrap",g.innerHTML='					<div class="menu-wrap" id="menu-wrap">						<div class="menu-title">目录</div>						<div class="menu-box" id="menu-box">							<div class="menu-list">								<ul id="menu-ul">'+b.join("")+'</ul>								<div class="powerby">百灵欧拓 版权所有</div>							</div>						</div>					</div>',document.body.appendChild(g),i=document.createElement("div"),i.className="menu-cover",c.appendChild(i),h=document.createElement("div"),h.id=h.className="btn-menu",c.appendChild(h),d()}function d(){a.addEvent(h,"click",f),a.addEvent(i,"click",f),a.forEach(a.getAll("#menu-ul li"),function(b,c){a.addEvent(b,"click",function(a){return f(),sectionSwipe.setCurrentSection(c),a.preventDefault(),!1}),a.addEvent(b.querySelector("img"),"load",e)})}function e(){k--,0==k&&(l=new IScroll("#menu-box",{mouseWheel:!0,click:!0}))}function f(){c.classList.toggle("hide")}var g,h,i,j,k,l;return{init:function(){b()}}}(),b.wx=function(){function b(b){b=b||'请点击右上角<br>再点击"分享到朋友圈"';var d='<img src="sources/share-tips.png" alt="" /><div class="share-text">'+b+"</div>";e=document.createElement("div"),e.className="box-share",e.innerHTML=d,c.appendChild(e),a.addEvent(e,"click",function(){e.classList.remove("show")})}function d(){var a=window.navigator.userAgent.toLowerCase();return"micromessenger"==a.match(/MicroMessenger/i)?!0:!1}var e,f={};return{iswx:d,contactLink:"",setData:function(a){return a=a||{},f={title:a.title||document.title,link:a.link||location.href,desc:a.desc||document.title,img_url:a.img_url||""},this},getData:function(){return f},invoke:function(a,b){return a&&"object"==typeof b&&"undefined"!=typeof WeixinJSBridge?void WeixinJSBridge.invoke(a,b):!1},shareMessage:function(){var a=this.getData();this.invoke("sendAppMessage",a)},share:function(){var a=this.getData();a.title=a.desc,this.invoke("shareTimeline",a)},init:function(c){var d=this;d.inited||(d.inited=!0,b(c),a.forEach(a.getAll(".btn-share"),function(b){a.addEvent(b,"click",function(){e.classList.add("show")})}),d.setData(),document.addEventListener("WeixinJSBridgeReady",function(){WeixinJSBridge.on("menu:share:appmessage",function(){d.shareMessage()}),WeixinJSBridge.on("menu:share:timeline",function(){d.share()})},!1))}}}(),window.ev=a,window.mymodule=b}(),function(){function a(){ev.addEvent(c,ev.start,function(a){if(!b.transiting){b.imgsolo=ev.closest(a.target,"block-imgsolo"),b.imgsoloStart=b.imgsolo?!0:!1;var c=ev.getAll(".section.next");ev.forEach(c,function(a){a.classList.remove("next")}),b.started=!0,b.stop=!1;var d=ev.isTouch?a.touches[0]:a;b.pointX=[d.pageX],b.pointY=[d.pageY],b.imgsoloStart?b.imgsoloDuration(0):b.sectionDuration(0)}}),ev.addEvent(document,ev.move,function(a){if(b.started){{var c=ev.isTouch?a.touches[0]:a,d=b.pointX,e=b.pointY;d[d.length]=c.pageX,e[e.length]=c.pageY}b.imgsoloStart&&Math.abs(d[0]-d[1])>=Math.abs(e[0]-e[1])?b.imgsoloTransform():(b.dir="y",b.stop=!b.isUp()&&b.curIsFirst()||b.isUp()&&b.curIsLast(),"y"==b.dir&&b.slideY(e[0]-e[e.length-1])),a.preventDefault()}}),ev.addEvent(document,ev.end,function(a){var c=b.pointX,d=b.pointY;if(b.started&&c.length>2){if(b.transiting=!0,b.imgsoloStart&&Math.abs(c[0]-c[1])>=Math.abs(d[0]-d[1]))b.imgsoloEnd();else{setTimeout(function(){b.sectionEnded(),b.doFn("sectionEnd"),b.transiting=!1},300),b.sectionDuration(.3);var e=window.innerHeight,f=b.goToNext=!b.stop&&Math.abs(d[d.length-1]-d[0])>=e/4;f?(e=b.isUp()?e:-e,b.slideY(e,!0)):b.reset()}a.preventDefault()}b.imgsoloStart=void 0,b.started=!1})}var b=function(){var c={};return{started:!1,transiting:!1,pointX:[],pointY:[],doFn:function(a,d){c[a]&&c[a].length&&ev.forEach(c[a],function(a){"function"==typeof a&&a.call(d||b)})},addFn:function(a,b){c[a]||(c[a]=[]),"function"==typeof b&&c[a].indexOf(b)<0&&c[a].push(b)},removeFn:function(a,b){if(b[a]&&"function"==typeof b)for(var c=b[a].indexOf(b);c>=0;)b[a].splice(c,1),c=b[a].indexOf(b)},getNext:function(a,b){var c=a[b?"previousElementSibling":"nextElementSibling"];return c},isUp:function(){var a=!0,b=this.pointY;return b[b.length-1]-b[0]>=0&&(a=!1),a},curIsFirst:function(){return d[0].className.indexOf("cur")>=0},curIsLast:function(){return d[d.length-1].className.indexOf("cur")>=0},translateY:function(a,b){a.style[ev.vendor+"Transform"]=a._translate="translate3d(0,"+b+"px,0)"},translateX:function(a,b){a.style[ev.vendor+"Transform"]=a._translate="translate3d("+b+"px,0,0)"},imgsoloEnd:function(){var a=b.pointX;b.imgsoloDuration(.3);var c=function(){},d=b.imgsolo.querySelector("li");if(Math.abs(a[a.length-1]-a[0])>20){c=function(){d.style.cssText="",d.querySelector("img").style.cssText="",b.imgsolo.querySelector("ul").appendChild(d)};var e=window.innerWidth;a[a.length-1]-a[0]<0&&(e=-window.innerWidth),d.style.opacity=0,b.translateX(d,e)}else d.querySelector("img").style.cssText="",b.translateX(d,0);var f=parseInt(d.getAttribute("imgIndex")),g=b.imgsolo.nextElementSibling;if(g){var h=g.querySelectorAll("li");f+1==h.length&&(f=-1),ev.forEach(h,function(a,b){a.className=b==f+1?"cur":""})}setTimeout(function(){c(),b.doFn("imgsoloEnd",b.imgsolo),b.transiting=!1},300)},imgsoloTransform:function(){var a=b.pointX,c=b.imgsolo.querySelector("li"),d=a[a.length-1]-a[0],e=1-Math.abs(d)/window.innerHeight;c.style[ev.vendor+"Transform"]="translate3d("+d+"px,0,0) scale("+(.9>e?.9:e)+")",c.querySelector("img").style.opacity=e},imgsoloDuration:function(a){b.imgsolo.querySelector("li").style[ev.vendor+"Transition"]=a+"s"},sectionDuration:function(a){var c=ev.get(".section.cur"),d=b.getNext(c),e=b.getNext(c,!0);c.style[ev.vendor+"Transition"]=a+"s",d&&(d.style[ev.vendor+"Transition"]=a+"s"),e&&(e.style[ev.vendor+"Transition"]=a+"s")},sectionScale:function(a,b){var c=b;0>b&&(c=-b);var c=1-c/window.innerHeight;a.style[ev.vendor+"Transform"]=a._translate+" scale("+c+")"},slideY:function(a,c){{var e=ev.get(".section.cur");d.length<3}if("y"==b.dir){var f=b.getNext(e),g=b.getNext(e,!0),h=window.innerHeight;!b.isUp()&&b.curIsFirst()||b.isUp()&&b.curIsLast()?(b.reset(),f&&f.classList.remove("next"),g&&g.classList.remove("next")):(f&&f.classList.add("next"),g&&g.classList.add("next"),c?b.isUp()?f&&b.translateY(f,0):g&&b.translateY(g,0):(f&&b.translateY(f,-a+h),g&&b.translateY(g,-h-a)),f&&(f.style.opacity=1),g&&(g.style.opacity=1),e.style.opacity=1-Math.abs(a)/window.innerHeight,b.sectionScale(e,a/2))}},sectionEnded:function(){var a=ev.get(".section.cur"),c=b.getNext(a);if(c=b.isUp()?b.getNext(a):b.getNext(a,!0),b.sectionDuration(0),b.goToNext){var d=ev.getAll(".section.cur");ev.forEach(d,function(a){a.classList.remove("cur")}),c.classList.add("cur")}var e=ev.getAll(".section.next");ev.forEach(e,function(a){a.classList.remove("next")});var f=ev.get("#global-arrow");f.className=b.curIsLast()?"global-arrow-top":"global-arrow-btm",b.doFn("sectionEnd")},reset:function(){var a=ev.get(".section.cur"),c=b.getNext(a),d=b.getNext(a,!0);a.style.opacity=1,c&&(c.style.opacity=1),d&&(d.style.opacity=1),b.translateY(a,0),c&&b.translateY(c,window.innerHeight),d&&b.translateY(d,-window.innerHeight)},setIndex:function(){ev.forEach(ev.getAll(".block-imgsolo"),function(a){ev.forEach(a.querySelectorAll("li"),function(a,b){a.setAttribute("imgIndex",b)})})},setCurrentSection:function(a){var b=ev.get(".section.cur");b.classList.remove("cur"),b.style.opacity=0;var c=d[a];c.classList.add("cur"),c.style.opacity=1,this.translateY(c,0)},init:function(){ev.forEach(d,function(a,c){var d=0==c?0:window.innerHeight;b.translateY(a,d),a.setAttribute("sectionIndex",c)}),b.translateY(d[0],0),d[0].classList.add("cur"),b.setIndex(),a(),ev.get("#global-arrow").classList.add("global-arrow-btm")}}}(),c=ev.get("#section-wrap"),d=ev.getAll(".section");window.sectionSwipe=b}();